-----------------------------------------------------------------------------> >show dbs
-----------------------------------------------------------------------------
admin   0.000GB
config  0.000GB
local   0.000GB
pfizer  0.000GB
test    0.000GB
-----------------------------------------------------------------------------
> use test
-----------------------------------------------------------------------------
switched to db test
-----------------------------------------------------------------------------
> show collections
-----------------------------------------------------------------------------
customers
emp2
emp3
test
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user",
... total : {$sum :"$empage"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "total" : 99 }
>
-----------------------------------------------------------------------------
> db.emp3.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd002b443575dc1c06e31"), "empid" : 101 }
-----------------------------------------------------------------------------
> db.customers.find()
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user",
... total : {$avg :"$empage"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "total" : 24.75 }
>
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user",
... total : {$max :"$empage"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "total" : 26 }
>
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user",
... ... total : {$min :"$empage"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "total" : 24 }
>
-----------------------------------------------------------------------------
			$push 
-----------------------------------------------------------------------------
Inserts the value to an array in the resulting document
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user", lastName : {$push :"$empname"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "lastName" : [ "anil", "anil", "sunil", "nilay" ] }
>
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user", empIds : {$push :"$empid"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "empIds" : [ 101, 101, 102, 103 ] }
>
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user", empAges : {$push :"$empage"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "empAges" : [ 24, 24, 25, 26 ] }
>
-----------------------------------------------------------------------------
> db.emp3.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd002b443575dc1c06e31"), "empid" : 101 }
-----------------------------------------------------------------------------
> db.customers.find()
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user", first : {$first :"$empname"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "first" : "anil" }
>
-----------------------------------------------------------------------------
> db.emp2.find()
-----------------------------------------------------------------------------
{ "_id" : ObjectId("670cd1beb443575dc1c06e32"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e33"), "empid" : 101, "empname" : "anil", "empage" : 24 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e34"), "empid" : 102, "empname" : "sunil", "empage" : 25 }
{ "_id" : ObjectId("670cd6cbb443575dc1c06e35"), "empid" : 103, "empname" : "nilay", "empage" : 26 }
-----------------------------------------------------------------------------
> db.emp2.aggregate([{$group : {_id: "$by_user", lastName : {$last :"$empname"}}}])
-----------------------------------------------------------------------------
{ "_id" : null, "lastName" : "nilay" }
>
-----------------------------------------------------------------------------
	Possible stages in aggregation framework are following:
-----------------------------------------------------------------------------
 			$project:
-----------------------------------------------------------------------------
Used to select some specific fields from a collection.
-----------------------------------------------------------------------------
			$match: 
-----------------------------------------------------------------------------
This is a filtering operation and thus this can reduce the amount of 
documents that are given as input to the next stage.
-----------------------------------------------------------------------------
 			$group: 
-----------------------------------------------------------------------------
This does the actual aggregation as discussed above.
-----------------------------------------------------------------------------
 			$sort: 
-----------------------------------------------------------------------------
Sorts the documents.
-----------------------------------------------------------------------------
			$skip: 
-----------------------------------------------------------------------------
With this it is possible to skip forward in the list of documents for a given amount of documents.
-----------------------------------------------------------------------------
			$limit: 
-----------------------------------------------------------------------------
This limits the amount of documents to look at by the given number starting from the current positions
-----------------------------------------------------------------------------
			$unwind: 
-----------------------------------------------------------------------------
This is used to unwind document that are using arrays. 
-----------------------------------------------------------------------------
when using an array the data is kind of pre-joinded and this operation will 
be undone with this to have individual documents again. 
-----------------------------------------------------------------------------
Thus with this stage we will increase the amount of documents for the next stage.
-----------------------------------------------------------------------------
-----------------------------------------------------------------------------






