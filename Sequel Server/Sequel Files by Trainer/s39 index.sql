-----------------------------------------------------------------------------
-- clustered index 	: it is associated with the primary key
-----------------------------------------------------------------------------
-- non-clustered index 	: can be created for non-key columns
-----------------------------------------------------------------------------
-- unique index 	: can be clustered or non-clustered
-----------------------------------------------------------------------------
-- disable 		: the index can be disabled
-----------------------------------------------------------------------------
-- index is a non-visual object
-----------------------------------------------------------------------------
use db3;
go
-----------------------------------------------------------------------------
create table s1.emp23(	empid int primary key,
			firstname varchar(10) not null,
			lastname varchar(10) not null,
			empage int not null,
			empcity varchar(10) not null);
go
-----------------------------------------------------------------------------
--	[PK__emp23__AF4CE865358622C0]
-----------------------------------------------------------------------------
insert into s1.emp23   values(101,'anil','pawar',24,'pune');
go
-----------------------------------------------------------------------------
insert into s1.emp23   values(102,'sunil','jadhav',20,'mumbai');
go
-----------------------------------------------------------------------------
insert into s1.emp23   values(103,'suresh','patil',19,'pune');
go
-----------------------------------------------------------------------------
insert into s1.emp23   values(104,'centhil','singh',17,'agra');
go
-----------------------------------------------------------------------------
insert into s1.emp23    values(105,'rajesh','shinde',18,'banglore');
go
-----------------------------------------------------------------------------
select * from s1.emp23;
go
-----------------------------------------------------------------------------
empid	firstname	lastname	empage	empcity
-----------------------------------------------------------------------------
101	anil		pawar		24	pune
102	sunil		jadhav		20	mumbai
103	suresh		patil		19	pune
104	centhil		singh		17	agra
105	rajesh		shinde		18	banglore
106	rajesh1		shinde1		18	banglore
107	rajesh2		shinde2		18	banglore
108	rajesh3		shinde	18	pune
-----------------------------------------------------------------------------
-- query optimizer uses the clustered index (primary key ) 
-----------------------------------------------------------------------------
-- to scan the non-key column
-----------------------------------------------------------------------------
select * from s1.emp23 where empcity='pune' ;
go
-----------------------------------------------------------------------------
empid	firstname	lastname	empage	empcity
-----------------------------------------------------------------------------
101	anil		pawar		24	pune
103	suresh		patil		19	pune
108	rajesh3		shinde		18	pune
-----------------------------------------------------------------------------
-- create a non-clustered index on a non-key column
-----------------------------------------------------------------------------
create index ixcity on s1.emp23(empcity);
go
-----------------------------------------------------------------------------
Commands completed successfully.
-----------------------------------------------------------------------------
--	[ixcity] non-unique non-clustered
-----------------------------------------------------------------------------
-- query optimizer will now use the ixcity index for the scan and 
-----------------------------------------------------------------------------
-- hence it will be faster
-----------------------------------------------------------------------------
select * from s1.emp23 where empcity='pune' ;
go
-----------------------------------------------------------------------------
empid	firstname	lastname	empage	empcity
-----------------------------------------------------------------------------
101	anil		pawar		24	pune
103	suresh		patil		19	pune
108	rajesh3		shinde		18	pune
-----------------------------------------------------------------------------
drop index s1.emp23.ixcity;
go
-----------------------------------------------------------------------------
Commands completed successfully.
-----------------------------------------------------------------------------
create unique index ixfirstname on s1.emp23(firstname);
go
-----------------------------------------------------------------------------
--	[ixfirstname] unique non-clustered
-----------------------------------------------------------------------------
select * from s1.emp23 where firstname='rajesh';
go
-----------------------------------------------------------------------------
	empid	firstname	lastname	empage	empcity
-----------------------------------------------------------------------------
	105	rajesh		shinde		18	banglore
-----------------------------------------------------------------------------
alter index ixfirstname on s1.emp23 disable;
go
-----------------------------------------------------------------------------
Commands completed successfully.
-----------------------------------------------------------------------------
-- now the above index will not be used for scanning
-----------------------------------------------------------------------------
-- verify this with the execution plan
-----------------------------------------------------------------------------
-- select query -> right click -> estimated query plan
-----------------------------------------------------------------------------
select * from s1.emp23 where firstname='rajesh';
go
-----------------------------------------------------------------------------
	empid	firstname	lastname	empage	empcity
-----------------------------------------------------------------------------
	101	anil		pawar		24	pune
	103	suresh		patil		19	pune
-----------------------------------------------------------------------------
drop index s1.emp23.ixfirstname;
go
-----------------------------------------------------------------------------
Commands completed successfully.
-----------------------------------------------------------------------------
-----------------------------------------------------------------------------








